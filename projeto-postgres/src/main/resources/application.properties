# ============================================================================
# CONFIGURAÇÕES GERAIS DA APLICAÇÃO SPRING BOOT
# ============================================================================

# Nome da aplicação (usado para identificação em logs e métricas)
spring.application.name=projeto-postgres

# ============================================================================
# CONFIGURAÇÕES DO BANCO DE DADOS POSTGRESQL
# ============================================================================

# URL de conexão com o banco PostgreSQL
# jdbc:postgresql://localhost:5432/crud_db significa:
# - jdbc:postgresql: Protocolo JDBC para PostgreSQL
# - localhost:5432: Servidor e porta do PostgreSQL (padrão: 5432)
# - crud_db: Nome do banco de dados (deve ser criado antes de iniciar a aplicação)
# 
# IMPORTANTE: Certifique-se de que:
# 1. O PostgreSQL está instalado e rodando
# 2. O banco de dados "crud_db" foi criado (execute: CREATE DATABASE crud_db;)
# 3. O usuário "postgres" tem permissões no banco
# 
# VANTAGENS DO POSTGRESQL:
# - Dados são persistidos permanentemente
# - Adequado para produção
# - Suporta transações ACID
# - Muito performático e confiável
spring.datasource.url=jdbc:postgresql://localhost:5432/crud_db

# Usuário do PostgreSQL
# Por padrão, o PostgreSQL cria um usuário "postgres" com privilégios de superusuário
# Em produção, crie um usuário específico para a aplicação com permissões limitadas
spring.datasource.username=postgres

# Senha do PostgreSQL
# IMPORTANTE: Altere para a senha do seu PostgreSQL!
# Em produção, use variáveis de ambiente ou um gerenciador de secrets
spring.datasource.password=postgres

# Classe do driver JDBC do PostgreSQL
# O Spring Boot usa esta classe para se conectar ao banco
# O driver é baixado automaticamente via Maven (dependência no pom.xml)
spring.datasource.driver-class-name=org.postgresql.Driver

# ============================================================================
# CONFIGURAÇÕES DO JPA/HIBERNATE (ORM - Object-Relational Mapping)
# ============================================================================

# Dialeto SQL do banco de dados
# O Hibernate usa dialetos para gerar SQL específico de cada banco
# PostgreSQLDialect: Gera SQL otimizado para o PostgreSQL
# O Hibernate automaticamente:
# - Usa tipos de dados específicos do PostgreSQL (SERIAL, VARCHAR, etc.)
# - Gera queries compatíveis com a sintaxe do PostgreSQL
# - Otimiza as queries para melhor performance
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Estratégia de criação/atualização do schema do banco
# Opções:
# - create: Apaga e recria o schema toda vez (PERDE TODOS OS DADOS!)
# - create-drop: Cria ao iniciar, apaga ao encerrar
# - update: Cria tabelas se não existirem, atualiza se existirem (RECOMENDADO PARA DEV)
# - validate: Apenas valida se as tabelas existem (não cria nada)
# - none: Não faz nada (use quando gerencia o schema manualmente)
# 
# IMPORTANTE: Em produção, use "validate" ou "none" e gerencie o schema com migrations
# (ex: Flyway ou Liquibase) para ter controle total sobre as mudanças no banco
spring.jpa.hibernate.ddl-auto=update

# Exibe as queries SQL no console
# Muito útil para debug e entender o que o Hibernate está fazendo
# Em produção, desabilite para melhor performance (false)
# Você verá queries como: INSERT INTO products (name, price_in_cents) VALUES (?, ?)
spring.jpa.show-sql=true

# Formata as queries SQL para facilitar leitura
# Adiciona quebras de linha e indentação nas queries
# Facilita muito o debug quando show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Configuração específica do PostgreSQL para LOBs (Large Objects)
# Necessário para evitar problemas com tipos de dados grandes (TEXT, BYTEA, etc.)
# LOBs são usados para armazenar dados grandes como imagens, documentos, etc.
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ============================================================================
# CONFIGURAÇÕES DO POOL DE CONEXÕES (HIKARICP)
# ============================================================================

# O Spring Boot usa HikariCP como pool de conexões por padrão
# O pool gerencia múltiplas conexões com o banco para melhor performance
# 
# maximum-pool-size: Número máximo de conexões no pool
# - 10 conexões simultâneas podem ser usadas
# - Ajuste baseado na carga esperada da aplicação
# - Muitas conexões consomem recursos do banco
# - Poucas conexões podem causar lentidão sob carga
spring.datasource.hikari.maximum-pool-size=10

# minimum-idle: Número mínimo de conexões mantidas abertas
# - 5 conexões ficam sempre abertas (prontas para uso)
# - Melhora performance ao evitar criar conexões sob demanda
# - Consome mais recursos, mas reduz latência
spring.datasource.hikari.minimum-idle=5

# COMO FUNCIONA O POOL:
# 1. Ao iniciar, cria 5 conexões (minimum-idle)
# 2. Quando uma requisição precisa de conexão, pega uma do pool
# 3. Após usar, a conexão volta para o pool (não é fechada)
# 4. Se todas as conexões estiverem em uso, cria novas (até maximum-pool-size)
# 5. Conexões não utilizadas são fechadas após um tempo de inatividade
# 
# VANTAGENS:
# - Reutilização de conexões (muito mais rápido que criar novas)
# - Controle de recursos (limita conexões simultâneas)
# - Melhor performance geral da aplicação

